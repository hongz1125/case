<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" />
    <title>admin</title>
    <link rel="stylesheet" href="/static/base/css/element.min.css" />
    <link rel="stylesheet" href="/static/admin/index.css" />
    <script src="/static/base/js/jquery.min.js"></script>
    <script src="/static/base/js/vue.min.js"></script>
    <script src="/static/base/js/element.min.js"></script>
    <script src="/static/admin/index.js"></script>
</head>

<body>
    <section id="app">
        <header class="ux_head">xxxx</header>
        <nav class="ux_left">
            <el-col>
                <el-menu default-active="1" class="el-menu-vertical-demo" theme="dark">
                    <el-menu-item index="1">xxxxx</el-menu-item>
                </el-menu>
            </el-col>
        </nav>
        <section class="ux_body">
            <section>
                <el-button @click="on_add" type="primary">新增项目</el-button>
            </section>
            <br />
            <section v-loading="loading">
                <el-table :data="list" style="width: 100%">
                    <el-table-column prop="id" label="#" width="80">
                    </el-table-column>
                    <el-table-column label="活动名称" width="180" inline-template>
                        <section>
                            \{{row.cn_name}}
                            <br /> \{{row.en_name}}
                        </section>
                    </el-table-column>
                    <el-table-column label="客户名称" width="180" inline-template>
                        <section>
                            \{{row.custom}}
                        </section>
                    </el-table-column>
                    <el-table-column label="活动时间" inline-template>
                        <section>
                            \{{row.start_time}}
                            <br /> \{{row.end_time}}
                        </section>
                    </el-table-column>
                    <el-table-column label="所在城市" inline-template>
                        <section>
                            \{{row.city}}
                        </section>
                    </el-table-column>
                    <el-table-column label="更新时间" inline-template>
                        <section>
                            \{{row.dateline}}
                        </section>
                    </el-table-column>
                    <el-table-column label="操作" inline-template>
                        <section>
                            <el-button type='primary' size="small" @click="window.location.assign('/admin/edit')">修改</el-button>
                            <el-button type='primary' size="small" @click="on_del">删除</el-button>
                        </section>
                    </el-table-column>
                </el-table>
                <div class="ux_page">
                    <el-pagination @current-change="handleCurrentChange" :current-page.sync="page" :page-size="page_size" layout="total, prev, pager, next" :total="page_total">
                    </el-pagination>
                </div>
            </section>
        </section>
    </section>
</body>
<script>
new Vue({
    el: '#app',
    data: {
        list: [],
        page_total: 0,
        page_size: 10,
        page: 1,
        loading: true,
        dialog_edit: false,
    },
    methods: {
        handleCurrentChange: function(val) {
            this.page = val;
            this.get_list();
        },
        on_add: function() {},
        on_edit: function() {},
        on_del: function() {},
        get_list: function() {
            this.loading = true;
            do_ajax({
                url: '/api/case/list',
                data: {
                    page: this.page,
                    page_size: this.page_size
                }
            }).then(res => {
                this.list = res.data.list;
                this.page_total = res.data.page_total;
                this.loading = false;
            }).catch(msg => {
                this.$message.error(msg);
            })
        }
    },
    mounted: function() {
        this.get_list({
            page_size: this.page_size,
            page: this.page
        });
    }
})
</script>

</html>